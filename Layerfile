FROM vm/ubuntu:18.04

# 安装必要的软件包
RUN apt-get update && apt-get install -y curl

# 安装 Node.js 14.x 版本
RUN curl -sL https://deb.nodesource.com/setup_14.x | bash && \
    apt-get install -y nodejs && \
    rm -f /etc/apt/sources.list.d/nodesource.list

# 设置工作目录
WORKDIR /app

# 复制项目文件到虚拟机
COPY . .

# 安装项目依赖
RUN npm install

# 检查 Node 和 npm 版本
RUN node -v && npm -v

# 暴露端口（确保应用程序监听此端口）
EXPOSE 3000

# 启动应用程序
CMD ["npm", "start"]
